<div class="list activities" ng-controller="ActivitiesCtrl">
  <div class="item list-title">
    动态
  </div>

  <div class="item item-avatar" ng-repeat="item in activities">
    <i class="icon activities-icon" ng-class="item.icon" ng-if="!item.isComment"></i>
    <div ng-if="item.isComment" class="avatar item-image activities-comment-avatar"
      style="background-image: url({{::item.creatorAvatar}})"></div>
    <time>{{::item.created | formatDate}}</time>
    <p ng-if="item.isComment" class="activity-creator">{{::item.creatorName}}</p>
    <div ng-if="item.isComment" class="activity-content" ng-bind-html="item.content"></div>
    <div class="activity-content attachments" ng-repeat="atta in item.attachments" on-tap="openAtta(atta)">
      <span ng-bind="::atta.fileName" ng-if="atta.fileCategory !== 'image' && !playable(atta)"></span>
      <a class="activity-image-preview item item-avatar" ng-if="atta.fileCategory === 'image'">
        <img ng-src="{{atta.thumbnail}}" />
        <span ng-bind="::atta.fileName"></span>
      </a>
      <a class="audio-play-preview" ng-if="playable(atta)">
        <audio-play atta="atta"/>
        <!--<span ng-bind="::atta.fileName" class="audio-title"></span>-->
      </a>
    </div>
    <div ng-if="!item.isComment" class="creator-name" ng-class="{'activity-linked': item.action === 'linked'}" on-tap="conjunction(item.linked)">
      <span class="name">{{::item.creatorName}}</span>
      <span ng-bind-html="item.content"></span>
    </div>
  </div>
</div>
